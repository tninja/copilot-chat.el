
* Function call dependencies

#+BEGIN_SRC plantuml :file dependencies.png
@startuml
!define RECTANGLE class
!define DIAMOND diamond

' 定义所有节点
RECTANGLE copilot-chat--write-buffer
RECTANGLE copilot-chat--format-data
DIAMOND copilot-chat-prompt-send
RECTANGLE copilot-chat--ready-p
RECTANGLE copilot-chat--create-req
RECTANGLE copilot-chat--ask
RECTANGLE copilot-chat--uuid
RECTANGLE copilot-chat--machine-id
RECTANGLE copilot-chat--auth
RECTANGLE copilot-chat--login
RECTANGLE copilot-chat--renew-token
RECTANGLE copilot-chat--curl-login
RECTANGLE copilot-chat--curl-renew-token
RECTANGLE copilot-chat--request-login
RECTANGLE copilot-chat--request-renew-token
RECTANGLE copilot-chat--curl-ask
RECTANGLE copilot-chat--request-ask
RECTANGLE copilot-chat--create
RECTANGLE copilot-chat--get-cached-token

' 添加关系
copilot-chat-prompt-send --> copilot-chat--ready-p
copilot-chat-prompt-send --> copilot-chat-reset
copilot-chat-prompt-send --> copilot-chat--write-buffer
copilot-chat-prompt-send --> copilot-chat--format-data
copilot-chat-prompt-send --> copilot-chat--ask

copilot-chat--create-req --> copilot-chat-history
copilot-chat--create-req --> copilot-chat-buffers

copilot-chat--ask --> copilot-chat-history
copilot-chat--ask --> copilot-chat--auth
copilot-chat--ask --> copilot-chat--curl-ask
copilot-chat--ask --> copilot-chat--request-ask

copilot-chat--create --> copilot-chat--get-cached-token
copilot-chat--create --> copilot-chat--uuid
copilot-chat--create --> copilot-chat--machine-id

copilot-chat--login --> copilot-chat--curl-login
copilot-chat--login --> copilot-chat--request-login

copilot-chat--renew-token --> copilot-chat--curl-renew-token
copilot-chat--renew-token --> copilot-chat--request-renew-token

copilot-chat--auth --> copilot-chat--login
copilot-chat--auth --> copilot-chat--renew-token

' Shell Maker 相关
DIAMOND copilot-chat--shell-maker-custom-prompt-selection
RECTANGLE copilot-chat--shell-maker-insert-and-send-prompt
DIAMOND copilot-chat--shell-maker-display
RECTANGLE copilot-chat--shell-maker-copy-faces
RECTANGLE copilot-chat--shell-cb-prompt
RECTANGLE copilot-chat--shell-cb
RECTANGLE copilot-chat--shell
RECTANGLE copilot-chat-shell-maker-init

copilot-chat--shell-maker-custom-prompt-selection --> copilot-chat-reset
copilot-chat--shell-maker-custom-prompt-selection --> copilot-chat--shell-maker-insert-and-send-prompt

copilot-chat--shell-maker-display --> copilot-chat-reset
copilot-chat--shell-maker-display --> copilot-chat--shell-maker-prepare-buffers

copilot-chat--shell-cb --> copilot-chat--shell-cb-prompt
copilot-chat--shell-cb --> copilot-chat--ask

copilot-chat--shell --> shell-maker-start
copilot-chat-shell-maker-init --> copilot-chat--shell-maker-clean
@enduml
#+END_SRC

#+RESULTS:
[[file:dependencies.png]]
